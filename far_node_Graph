from collections import defaultdict

def solution(n, edge):
    
    graph = defaultdict(set)
    
    for node in edge :
        graph[node[0]].add(node[1])
        graph[node[1]].add(node[0])
        
    distances = {}
    distances[1] = 0
    
    BFS = [1]
    isVisited = {1,}
    
    while BFS :
        n = BFS.pop(0)
        
        for neighbor in graph[n] :
            if neighbor not in isVisited :
                BFS.append(neighbor)
                distances[neighbor] = distances[n]+1
                isVisited.add(neighbor)
                
    distance = list(distances.values())
    distance.sort(reverse=True)
    max_distance = distance[0]
    cnt=0
    for d in distance :
        if d == max_distance : cnt += 1
        else : break
            
    return cnt
